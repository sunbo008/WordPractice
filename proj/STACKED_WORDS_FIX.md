# å †å åŒºæ˜¾ç¤ºé—®é¢˜ä¿®å¤æŠ¥å‘Š

## ğŸ› é—®é¢˜æè¿°

**ç—‡çŠ¶**ï¼šå•è¯å¤±è´¥åï¼Œæ­£ç¡®åŠ å…¥äº†é”™è¯æœ¬ï¼Œä½†å †å åŒºåªæ˜¾ç¤ºéƒ¨åˆ†å•è¯ã€‚

**å…·ä½“è¡¨ç°**ï¼š
- 4ä¸ªå•è¯æ”¾å¼ƒåï¼Œé”™è¯æœ¬æ˜¾ç¤ºå…¨éƒ¨4ä¸ª
- ä½†å †å åŒºåªæ˜¾ç¤ºäº†3ä¸ªå•è¯ï¼ˆgreen, three, sweetï¼‰
- ç¬¬4ä¸ªå•è¯ï¼ˆfreeï¼‰å®Œå…¨çœ‹ä¸è§

## ğŸ” é—®é¢˜åˆ†æ

é€šè¿‡è°ƒè¯•æ—¥å¿—å‘ç°ï¼š

### é€»è¾‘å±‚ âœ… å®Œå…¨æ­£å¸¸

```
âœ… å †å æ€»æ•°: 4
   å †å åˆ—è¡¨: green, three, sweet, free
âœ… éªŒè¯æˆåŠŸï¼šå•è¯å·²åœ¨å †å æ•°ç»„ä¸­
```

- å•è¯æˆåŠŸæ·»åŠ åˆ° `stackedWords` æ•°ç»„
- å•è¯æˆåŠŸæ·»åŠ åˆ°é”™è¯æœ¬
- æ•°ç»„éªŒè¯é€šè¿‡

### æ¸²æŸ“å±‚ âŒ å­˜åœ¨é—®é¢˜

é—®é¢˜å‡ºåœ¨ `drawStackedWords()` æ–¹æ³•çš„å¸ƒå±€è®¡ç®—ï¼š

**åŸå§‹å¸ƒå±€å‚æ•°ï¼š**
```javascript
const wordsPerRow = 5;    // æ¯è¡Œ5ä¸ªå•è¯
const wordWidth = 200;    // å•è¯å®½åº¦200px
const padding = 10;       // è¾¹è·10px
const gap = 5;            // é—´è·5px
```

**è®¡ç®—ç»“æœï¼š**
```
Canvaså®½åº¦: 600px

å•è¯0: x=10   åˆ° 210  âœ… æ­£å¸¸
å•è¯1: x=215  åˆ° 415  âœ… æ­£å¸¸
å•è¯2: x=420  åˆ° 620  âŒ è¶…å‡ºç”»å¸ƒ (620 > 600)
å•è¯3: x=625  åˆ° 825  âŒ å®Œå…¨è¶…å‡º (825 > 600)
å•è¯4: x=830  åˆ° 1030 âŒ å®Œå…¨è¶…å‡º (1030 > 600)
```

**ç»“è®º**ï¼šå•è¯å®½åº¦å¤ªå¤§ï¼Œå¯¼è‡´ä»ç¬¬3ä¸ªå•è¯å¼€å§‹å°±è¶…å‡ºç”»å¸ƒè¾¹ç•Œã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

è°ƒæ•´å•è¯å®½åº¦å’Œè¾¹è·ï¼Œç¡®ä¿5ä¸ªå•è¯èƒ½å®Œæ•´æ˜¾ç¤ºåœ¨ç”»å¸ƒå†…ã€‚

### ä¿®æ”¹å†…å®¹

**æ–‡ä»¶**ï¼š`proj/game.js` - `drawStackedWords()` æ–¹æ³•

**ä¿®æ”¹å‰ï¼š**
```javascript
const wordsPerRow = 5;
const wordWidth = 200;
const wordHeight = 50;
const padding = 10;
```

**ä¿®æ”¹åï¼š**
```javascript
const wordsPerRow = 5;
const wordWidth = 110;  // ä»200pxå‡å°åˆ°110px
const wordHeight = 50;  // ä¿æŒä¸å˜
const padding = 5;      // ä»10pxå‡å°åˆ°5px
```

### æ–°å¸ƒå±€éªŒè¯

```
Canvaså®½åº¦: 600px

å•è¯0: x=5   åˆ° 115  âœ… æ­£å¸¸
å•è¯1: x=120 åˆ° 230  âœ… æ­£å¸¸
å•è¯2: x=235 åˆ° 345  âœ… æ­£å¸¸
å•è¯3: x=350 åˆ° 460  âœ… æ­£å¸¸
å•è¯4: x=465 åˆ° 575  âœ… æ­£å¸¸

æ€»å®½åº¦éœ€æ±‚: 575px
ç”»å¸ƒå®½åº¦: 600px
å‰©ä½™ç©ºé—´: 25px âœ…
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### ä¿®å¤å‰
- âŒ å †å åŒºåªæ˜¾ç¤º3ä¸ªå•è¯
- âŒ ç¬¬4ä¸ªå•è¯å®Œå…¨çœ‹ä¸è§
- âœ… é”™è¯æœ¬æ˜¾ç¤ºæ­£å¸¸ï¼ˆ4ä¸ªå•è¯ï¼‰
- âœ… é€»è¾‘å®Œå…¨æ­£å¸¸

### ä¿®å¤åï¼ˆé¢„æœŸï¼‰
- âœ… å †å åŒºæ˜¾ç¤ºå…¨éƒ¨å•è¯
- âœ… æ‰€æœ‰å•è¯åœ¨ç”»å¸ƒèŒƒå›´å†…
- âœ… é”™è¯æœ¬æ˜¾ç¤ºæ­£å¸¸
- âœ… é€»è¾‘å®Œå…¨æ­£å¸¸

## ğŸ¯ æ ¹æœ¬åŸå› 

è¿™æ˜¯ä¸€ä¸ª**è§†è§‰å¸ƒå±€é—®é¢˜**ï¼Œè€Œä¸æ˜¯é€»è¾‘é—®é¢˜ï¼š

1. **é€»è¾‘å±‚**ï¼šå•è¯æ·»åŠ ã€å­˜å‚¨ã€éªŒè¯ - å®Œå…¨æ­£å¸¸ âœ…
2. **æ•°æ®å±‚**ï¼šæ•°ç»„æ“ä½œã€é”™è¯æœ¬ç®¡ç† - å®Œå…¨æ­£å¸¸ âœ…
3. **æ¸²æŸ“å±‚**ï¼šCanvasç»˜åˆ¶ã€åæ ‡è®¡ç®— - **å­˜åœ¨é—®é¢˜** âŒ

é—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š
- è®¾è®¡æ—¶å‡è®¾å•è¯å®½åº¦200pxå¯ä»¥æ”¾ä¸‹5ä¸ªå•è¯
- ä½†å®é™…è®¡ç®—ï¼š5 Ã— (200 + 5) + 10 = 1035px > 600px
- å¯¼è‡´åé¢çš„å•è¯è¶…å‡ºç”»å¸ƒè¾¹ç•Œï¼Œæ— æ³•æ˜¾ç¤º

## ğŸ’¡ ç»éªŒæ•™è®­

### 1. å¸ƒå±€è®¡ç®—å…¬å¼

æ¯è¡ŒNä¸ªå…ƒç´ çš„æ€»å®½åº¦è®¡ç®—ï¼š
```
æ€»å®½åº¦ = padding + N Ã— (elementWidth + gap) - gap + padding
       = 2 Ã— padding + N Ã— elementWidth + (N-1) Ã— gap
```

å¯¹äº5ä¸ªå•è¯ï¼š
```
æ€»å®½åº¦ = 2Ã—5 + 5Ã—110 + 4Ã—5 = 10 + 550 + 20 = 580px < 600px âœ…
```

### 2. è°ƒè¯•ç­–ç•¥

å½“é‡åˆ°"é€»è¾‘æ­£å¸¸ä½†æ˜¾ç¤ºä¸æ­£å¸¸"çš„é—®é¢˜æ—¶ï¼š

1. âœ… **å…ˆéªŒè¯é€»è¾‘**ï¼šä½¿ç”¨è°ƒè¯•æ—¥å¿—ç¡®è®¤æ•°æ®æ­£ç¡®
2. âœ… **å†æ£€æŸ¥æ¸²æŸ“**ï¼šè®¡ç®—åæ ‡ã€å°ºå¯¸æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†…
3. âœ… **ä½¿ç”¨æ•°å­¦éªŒè¯**ï¼šç”¨ç®€å•è®¡ç®—éªŒè¯å¸ƒå±€æ˜¯å¦å¯è¡Œ

### 3. è°ƒè¯•æ—¥å¿—çš„ä»·å€¼

è°ƒè¯•æ—¥å¿—ç³»ç»Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½é—®é¢˜ï¼š
- ç¡®è®¤äº†é€»è¾‘å±‚å®Œå…¨æ­£å¸¸
- æ’é™¤äº†æ•°æ®å±‚çš„é—®é¢˜
- å°†é—®é¢˜ç²¾ç¡®å®šä½åˆ°æ¸²æŸ“å±‚
- èŠ‚çœäº†å¤§é‡è°ƒè¯•æ—¶é—´

## ğŸ”§ å…¶ä»–ä¼˜åŒ–

### æ·»åŠ æ¸²æŸ“æ—¥å¿—

åœ¨ `drawStackedWords()` ä¸­æ·»åŠ äº†æ¸²æŸ“çŠ¶æ€æ—¥å¿—ï¼š

```javascript
if (this.stackedWords.length > 0 && Math.random() < 0.02) {
    debugLog.info(`ğŸ¨ æ¸²æŸ“å †å åŒº: ${this.stackedWords.length}ä¸ªå•è¯ [${words}]`);
}
```

è¿™æ ·å¯ä»¥å¶å°”çœ‹åˆ°æ¸²æŸ“çŠ¶æ€ï¼Œç¡®è®¤æ¸²æŸ“æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

### æ”¹è¿›é”™è¯¯æ—¥å¿—

å°† `console.error` æ”¹ä¸º `debugLog.error`ï¼Œç»Ÿä¸€æ—¥å¿—è¾“å‡ºï¼š

```javascript
if (!word.original) {
    debugLog.error(`âŒ å †å åŒºå•è¯ç¼ºå°‘originalå±æ€§ï¼Œç´¢å¼•: ${index}`);
    return;
}
```

## ğŸ“ æµ‹è¯•å»ºè®®

ä¿®å¤åè¯·æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

1. **åŸºç¡€æµ‹è¯•**ï¼šæ”¾å¼ƒ5ä¸ªå•è¯ï¼Œç¡®è®¤å…¨éƒ¨æ˜¾ç¤º
2. **å¤šè¡Œæµ‹è¯•**ï¼šæ”¾å¼ƒ10ä¸ªå•è¯ï¼ˆ2è¡Œï¼‰ï¼Œç¡®è®¤å¸ƒå±€æ­£å¸¸
3. **è¾¹ç•Œæµ‹è¯•**ï¼šæ”¾å¼ƒ15ä¸ªå•è¯ï¼ˆ3è¡Œï¼‰ï¼Œç¡®è®¤ä¸é‡å 
4. **å¤±è´¥æµ‹è¯•**ï¼šè®©å•è¯è‡ªç„¶ä¸‹é™å¤±è´¥ï¼Œç¡®è®¤æ˜¾ç¤ºæ­£å¸¸

## âœ… ç»“è®º

é—®é¢˜å·²ä¿®å¤ï¼è¿™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„**å¸ƒå±€è®¡ç®—é”™è¯¯**ï¼š

- **ä¸æ˜¯**é€»è¾‘é—®é¢˜
- **ä¸æ˜¯**æ•°æ®é—®é¢˜
- **ä¸æ˜¯**æ¸²æŸ“å¼•æ“é—®é¢˜
- **æ˜¯**å¸ƒå±€å‚æ•°è®¾ç½®ä¸å½“

é€šè¿‡è°ƒæ•´å•è¯å®½åº¦å’Œè¾¹è·ï¼Œç¡®ä¿æ‰€æœ‰å•è¯éƒ½èƒ½åœ¨ç”»å¸ƒèŒƒå›´å†…æ­£ç¡®æ˜¾ç¤ºã€‚

---

**ä¿®å¤æ—¶é—´**ï¼š2025-10-06  
**ä¿®å¤æ–‡ä»¶**ï¼š`proj/game.js`  
**ä¿®å¤è¡Œæ•°**ï¼šç¬¬1326-1328è¡Œ  
**é—®é¢˜ç±»å‹**ï¼šè§†è§‰å¸ƒå±€é—®é¢˜  
**ä¸¥é‡ç¨‹åº¦**ï¼šä¸­ç­‰ï¼ˆå½±å“ç”¨æˆ·ä½“éªŒä½†ä¸å½±å“åŠŸèƒ½ï¼‰
