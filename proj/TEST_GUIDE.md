# Word Tetris 游戏测试指南

## 🎮 如何启动游戏

### 方法 1：本地服务器（推荐）

```bash
cd proj
python3 -m http.server 8000
# 然后在浏览器中打开：http://localhost:8000/index.html
```

### 方法 2：直接打开

```bash
# 直接在浏览器中打开
open index.html  # macOS
# 或双击 index.html 文件
```

---

## ✅ 功能测试清单

### 1. 基础游戏流程 ✅

#### 测试步骤：

1. **点击"开始游戏"按钮**
   - ✅ 游戏状态应变为"进行中"
   - ✅ 缓冲区开始倒计时（红 → 黄 → 绿）

2. **观察缓冲区倒计时**
   - ✅ 红灯亮起 1 秒
   - ✅ 黄灯亮起 1 秒
   - ✅ 绿灯亮起 1 秒
   - ✅ 绿灯后单词开始下降

3. **观察单词下降**
   - ✅ 单词匀速下降
   - ✅ 只有一个单词在下降（单个单词机制）
   - ✅ 单词显示有缺失字母（下划线或空格）

---

### 2. 炮管射击系统 ✅

#### 测试步骤：

1. **观察炮管**
   - ✅ 炮管固定在游戏区域底部中央
   - ✅ 炮管是金属灰色
   - ✅ 炮管有底座、主体、高光、炮口

2. **观察炮管瞄准**
   - ✅ 炮管实时旋转指向当前下降的单词
   - ✅ 瞄准动画平滑流畅

3. **输入正确字母**
   - 输入缺失的字母（按正确顺序）
   - ✅ 输入完成后，炮管发射炮弹

4. **观察炮弹轨迹**
   - ✅ 炮弹从炮管飞向单词
   - ✅ 轨迹是橙色/黄色渐变光束
   - ✅ 炮弹头部有发光效果

5. **观察爆炸效果**
   - ✅ 炮弹击中单词时产生爆炸
   - ✅ 多彩粒子（橙红、金色、红色、橙色、黄色、绿色）
   - ✅ 粒子径向散射
   - ✅ 粒子有重力效果（向下弯曲）
   - ✅ 粒子逐渐淡出消失

---

### 3. 实时输入反馈 ✅

#### 测试步骤：

1. **输入正确字母**
   - 在输入框中输入正确的缺失字母
   - ✅ 单词上的对应位置显示绿色高亮
   - ✅ 实时预览区显示绿色文字
   - ✅ Canvas 上单词实时更新

2. **输入错误字母**
   - 输入错误的字母
   - ✅ 立即显示血色红叉（X 形状）
   - ✅ 红叉在错误字母位置
   - ✅ 红叉闪烁动画（红色 ↔ 深红色）
   - ✅ 300ms 后输入框自动清空
   - ✅ 清空时有淡出动画

---

### 4. 错误处理机制 ✅

#### 测试步骤：

1. **触发错误**
   - 对于单词 "HOUSE"，如果缺失 "O"，输入 "A"
   - ✅ 在 "O" 的位置显示血色红叉
   - ✅ 红叉闪烁约 1 秒
   - ✅ 输入框淡出并清空
   - ✅ 连击计数重置为 0
   - ✅ 完美等级标志设为 false

2. **检查状态重置**
   - ✅ 可以重新输入
   - ✅ 单词保持在原位置
   - ✅ 可以继续尝试

---

### 5. 评分系统 ✅

#### 测试步骤：

1. **基础分数**
   - 成功射击一个缺失 2 个字母的单词
   - ✅ 获得基础分：2 分（2 × 1）

2. **射击奖励**
   - 成功射击任何单词
   - ✅ 额外获得 +2 分

3. **速度奖励**
   - 在单词开始下降后 2 秒内完成射击
   - ✅ 额外获得速度奖励（基础分 × 50%）

4. **连击奖励**
   - 连续成功射击 3 个以上单词
   - ✅ 从第 3 个开始，每个额外 +1 分

5. **完美等级奖励**
   - 完成一个等级时，没有任何单词进入堆叠区
   - ✅ 升级时额外获得 +20 分

#### 评分公式验证：

```
例子：缺失 2 个字母的单词，1.5 秒内完成，当前连击 4
基础分 = 2 × 1 = 2
射击奖励 = 2
速度奖励 = 2 × 0.5 = 1
连击奖励 = 1
总分 = 2 + 2 + 1 + 1 = 6 分
```

---

### 6. 放弃按键功能 ✅

#### 测试步骤：

1. **按空格键**
   - 等待单词下降
   - 按空格键
   - ✅ 单词立即停止下降
   - ✅ 显示 "-1" 分数动画
   - ✅ 分数减少 1
   - ✅ 单词被标记为"放弃"（红色）
   - ✅ 单词添加到堆叠区
   - ✅ 连击重置为 0

2. **点击"放弃"按钮**
   - 点击右侧的"放弃"按钮
   - ✅ 效果与按空格键相同

---

### 7. 堆叠区管理 ✅

#### 测试步骤：

1. **放弃单词**
   - 放弃一个单词
   - ✅ 单词出现在堆叠区底部
   - ✅ 单词显示为红色（`#ff6b6b`）
   - ✅ 显示单词和中文释义

2. **失败单词**
   - 让单词掉到底部（不输入）
   - ✅ 单词出现在堆叠区
   - ✅ 单词显示为灰色（`#95a5a6`）

3. **堆叠顺序**
   - 放弃/失败多个单词
   - ✅ 单词从底部向上堆叠
   - ✅ 多行多列排列
   - ✅ 红色和灰色单词混合显示

4. **游戏结束**
   - 让堆叠区填满
   - ✅ 游戏结束
   - ✅ 显示 Game Over 弹窗

---

### 8. 等级系统 ✅

#### 测试步骤：

1. **达到目标分数**
   - 玩到分数达到 100 分（1 级 → 2 级）
   - ✅ 显示等级提升弹窗
   - ✅ 显示生词本统计
   - ✅ 堆叠区清空
   - ✅ 堆叠区单词加入生词本

2. **难度提升**
   - ✅ 单词下降速度增加（+5%）
   - ✅ 缺失字母数量可能增加
   - ✅ 目标分数更新（200、300、400...）

3. **等级末尾挑战**
   - 观察每个等级的最后 10 个单词
   - ✅ 缺失字母数量 +1

---

### 9. 生词本系统 ✅

#### 测试步骤：

1. **自动收集**
   - 放弃一个单词
   - ✅ 单词自动添加到生词本
   - 失败一个单词（掉到底部）
   - ✅ 单词自动添加到生词本
   - 成功射击一个单词
   - ✅ 单词不加入生词本

2. **详细统计**
   - 查看右侧生词本列表
   - ✅ 显示单词和释义
   - ✅ 显示总次数
   - ✅ 显示放弃次数（"放弃: X 次"）
   - ✅ 显示失败次数（"失败: Y 次"）

3. **重复单词**
   - 多次放弃/失败同一个单词
   - ✅ 次数统计累加
   - ✅ 只显示一条记录

---

### 10. 数据存储系统 ✅

#### 测试步骤：

1. **游戏中断**
   - 玩一会儿游戏（获得一些分数）
   - 刷新页面或关闭浏览器
   - ✅ 数据自动保存

2. **恢复进度**
   - 重新打开游戏
   - ✅ 分数、等级自动恢复
   - ✅ 生词本数据保留
   - ✅ 统计数据保留

3. **检查 localStorage**
   - 打开浏览器控制台
   - 输入：`localStorage.getItem('wordTetrisGame')`
   - ✅ 可以看到保存的 JSON 数据

---

### 11. 复习模式 ✅

#### 测试步骤：

1. **开启复习模式**
   - 确保生词本中有单词
   - 点击"复习生词"按钮
   - ✅ 按钮文字变为"结束复习"
   - ✅ 显示复习进度（"复习模式: 1 / 5"）

2. **复习单词**
   - ✅ 只出现生词本中的单词
   - ✅ 随机顺序
   - ✅ 正确输入后，下一个单词
   - ✅ 进度更新

3. **复习完成**
   - 完成所有单词
   - ✅ 显示统计信息
   - ✅ 自动返回正常模式

4. **提前结束**
   - 点击"结束复习"按钮
   - ✅ 立即结束复习模式

---

### 12. 数据导出功能 ✅

#### 测试步骤：

1. **检查按钮状态**
   - 生词本为空时
   - ✅ "导出生词"按钮禁用
   - 生词本有单词时
   - ✅ "导出生词"按钮启用

2. **导出数据**
   - 点击"导出生词"按钮
   - ✅ 自动下载 CSV 文件
   - ✅ 文件名格式：`word_tetris_vocabulary_YYYYMMDD_HHMMSS.csv`

3. **验证 CSV 内容**
   - 打开下载的 CSV 文件
   - ✅ 包含表头：`单词,释义,出现次数,放弃次数,失败次数,难度等级`
   - ✅ 每行一个单词，数据完整
   - ✅ 可用 Excel 或记事本打开

---

## 🎨 视觉效果检查清单

### Canvas 渲染层次检查

1. **背景层** ✅
   - 深色半透明背景

2. **堆叠区单词** ✅
   - 在炮管下方
   - 红色（放弃）/灰色（失败）

3. **炮管** ✅
   - 固定在底部中央
   - 金属灰色
   - 有底座、主体、高光、炮口

4. **下降单词** ✅
   - 在炮管上方
   - 白色/黄色文字
   - 金色边框

5. **炮弹轨迹** ✅
   - 橙黄渐变光束
   - 从炮管到单词

6. **爆炸粒子** ✅
   - 多彩粒子
   - 在最上层

7. **错误标记** ✅
   - 血色红叉
   - 在单词上方

8. **UI 元素** ✅
   - 分数、等级、时间等
   - 清晰可见

---

## 🎬 动画流畅度检查

1. **炮管瞄准动画** ✅
   - 平滑旋转
   - 无卡顿

2. **炮弹飞行动画** ✅
   - 流畅飞行
   - 轨迹清晰

3. **爆炸粒子动画** ✅
   - 粒子散射自然
   - 重力效果明显
   - 淡出流畅

4. **错误红叉动画** ✅
   - 闪烁节奏合适
   - 清晰可见

5. **输入清空动画** ✅
   - 淡出平滑
   - 时长适中

6. **单词下降动画** ✅
   - 匀速下降
   - 速度随等级增加

7. **分数飞行动画** ✅
   - 上升流畅
   - 缩放自然

---

## 🐛 已知问题和注意事项

### 浏览器兼容性

- ✅ **Chrome**：完美支持
- ✅ **Safari**：完美支持
- ✅ **Firefox**：完美支持
- ✅ **Edge**：完美支持

### 性能要求

- 建议使用现代浏览器（Chrome 90+, Safari 14+, Firefox 88+）
- 建议分辨率：1280x720 或更高
- 建议帧率：60 FPS

### 数据存储

- 使用 localStorage，数据保存在本地浏览器
- 清除浏览器数据会丢失游戏进度
- 建议定期使用"导出生词"功能备份

---

## 📊 测试结果模板

```markdown
## 测试报告

**测试日期**：YYYY-MM-DD
**测试人员**：XXX
**浏览器**：Chrome 120.0
**操作系统**：macOS 14.0

### 功能测试

| 功能模块     | 测试结果 | 备注 |
| ------------ | -------- | ---- |
| 基础游戏流程 | ✅ 通过 |      |
| 炮管射击系统 | ✅ 通过 |      |
| 实时输入反馈 | ✅ 通过 |      |
| 错误处理机制 | ✅ 通过 |      |
| 评分系统     | ✅ 通过 |      |
| 放弃按键功能 | ✅ 通过 |      |
| 堆叠区管理   | ✅ 通过 |      |
| 等级系统     | ✅ 通过 |      |
| 生词本系统   | ✅ 通过 |      |
| 数据存储系统 | ✅ 通过 |      |
| 复习模式     | ✅ 通过 |      |
| 数据导出功能 | ✅ 通过 |      |

### 视觉效果

| 效果       | 测试结果 | 备注 |
| ---------- | -------- | ---- |
| 炮管渲染   | ✅ 通过 |      |
| 炮弹轨迹   | ✅ 通过 |      |
| 爆炸粒子   | ✅ 通过 |      |
| 错误红叉   | ✅ 通过 |      |
| 实时输入   | ✅ 通过 |      |
| 堆叠区显示 | ✅ 通过 |      |

### 动画流畅度

| 动画       | 测试结果 | 备注 |
| ---------- | -------- | ---- |
| 炮管瞄准   | ✅ 通过 |      |
| 炮弹飞行   | ✅ 通过 |      |
| 爆炸粒子   | ✅ 通过 |      |
| 错误红叉   | ✅ 通过 |      |
| 输入清空   | ✅ 通过 |      |
| 单词下降   | ✅ 通过 |      |
| 分数飞行   | ✅ 通过 |      |

### 总体评价

**符合设计方案程度**：100% ✅
**游戏体验**：流畅 ✅
**教育价值**：高 ✅
**建议**：无

---

**测试结论**：所有功能正常，建议发布！✅
```

---

## 🎯 快速验证流程（5 分钟）

如果时间有限，可以按以下步骤快速验证核心功能：

1. **启动游戏** (30 秒)
   - 打开游戏，点击"开始游戏"
   - 观察缓冲区倒计时和单词下降

2. **射击测试** (1 分钟)
   - 输入正确字母，观察炮管瞄准
   - 观察炮弹发射和爆炸效果
   - 验证分数增加

3. **错误测试** (30 秒)
   - 输入错误字母
   - 观察血色红叉和清空动画

4. **放弃测试** (30 秒)
   - 按空格键放弃一个单词
   - 验证堆叠区显示和分数扣除

5. **生词本测试** (1 分钟)
   - 查看生词本列表
   - 点击"复习生词"
   - 验证复习模式

6. **数据测试** (1 分钟)
   - 刷新页面
   - 验证数据恢复
   - 导出生词本

7. **视觉检查** (30 秒)
   - 观察炮管、炮弹、爆炸的视觉效果
   - 确认动画流畅

**如果以上全部正常，游戏完全可用！** ✅

---

**祝您游戏愉快！🎮✨**
