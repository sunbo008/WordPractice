<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>éŸ³èŠ‚åˆ’åˆ†æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 40px;
            background: #1e3c72;
            color: white;
        }
        .test {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .word { font-size: 48px; margin: 10px 0; }
        .stress { color: #ff4444; }
        .normal { color: #ffffff; }
    </style>
</head>
<body>
    <h1>éŸ³èŠ‚åˆ’åˆ†è§„åˆ™æµ‹è¯•</h1>
    
    <div id="results"></div>
    
    <script>
        const testWords = [
            { word: 'father', vowelIdx: 1, expected: [0, 1], syllable: 'fa' },
            { word: 'mother', vowelIdx: 1, expected: [0, 1], syllable: 'mo' },
            { word: 'teacher', vowelIdx: 1, expected: [0, 1, 2, 3, 4], syllable: 'teach' },
            { word: 'about', vowelIdx: 1, expected: [1, 2, 3, 4], syllable: 'bout' },
            { word: 'banana', vowelIdx: 2, expected: [2, 3], syllable: 'na' },
        ];
        
        function getWholeSyllable(word, vowelIndex) {
            const vowels = 'aeiou';
            const result = [];
            
            let centerVowel = vowelIndex;
            
            // å‘å·¦æ‰©å±•
            let left = centerVowel;
            let consonantsBeforeCount = 0;
            let tempLeft = left - 1;
            while (tempLeft >= 0 && !vowels.includes(word[tempLeft])) {
                consonantsBeforeCount++;
                tempLeft--;
            }
            
            console.log(`${word}: å…ƒéŸ³='${word[centerVowel]}' at ${vowelIndex}`);
            console.log(`  å‰é¢æœ?${consonantsBeforeCount} ä¸ªè¾…éŸ³`);
            
            if (tempLeft >= 0) {
                if (consonantsBeforeCount === 1) {
                    left = left - 1;
                    console.log(`  å•ä¸ªè¾…éŸ³ï¼ŒåŒ…å? ${word[left]}`);
                } else if (consonantsBeforeCount >= 2) {
                    left = left - Math.ceil(consonantsBeforeCount / 2);
                    console.log(`  ${consonantsBeforeCount}ä¸ªè¾…éŸ³ï¼Œå–å${Math.ceil(consonantsBeforeCount / 2)}ä¸ª`);
                }
            } else {
                left = 0;
                console.log(`  å•è¯å¼€å¤´ï¼Œä»?å¼€å§‹`);
            }
            
            // å‘å³æ‰©å±•
            let right = centerVowel;
            while (right < word.length - 1 && vowels.includes(word[right + 1])) {
                right++;
            }
            
            let consonantsAfterCount = 0;
            let tempRight = right;
            while (tempRight < word.length - 1 && !vowels.includes(word[tempRight + 1])) {
                consonantsAfterCount++;
                tempRight++;
            }
            
            console.log(`  åé¢æœ?${consonantsAfterCount} ä¸ªè¾…éŸ? ${word.substring(right + 1, tempRight + 1)}`);
            
            if (tempRight < word.length - 1) {
                if (consonantsAfterCount === 1) {
                    console.log(`  å•ä¸ªè¾…éŸ³ï¼Œä¸åŒ…å«ï¼ˆç•™ç»™ä¸‹ä¸€ä¸ªéŸ³èŠ‚ï¼‰`);
                } else if (consonantsAfterCount >= 2) {
                    const take = Math.floor(consonantsAfterCount / 2);
                    right += take;
                    console.log(`  ${consonantsAfterCount}ä¸ªè¾…éŸ³ï¼Œå–å‰${take}ä¸ª`);
                }
            } else {
                right = tempRight;
                console.log(`  å•è¯ç»“å°¾ï¼Œå–æ‰€æœ‰è¾…éŸ³`);
            }
            
            console.log(`  ç»“æœ: left=${left}, right=${right}`);
            
            for (let i = left; i <= right && i < word.length; i++) {
                result.push(i);
            }
            
            return result;
        }
        
        let html = '';
        testWords.forEach(test => {
            console.log(`\n=== æµ‹è¯•: ${test.word} ===`);
            const result = getWholeSyllable(test.word, test.vowelIdx);
            const resultStr = result.map(i => test.word[i]).join('');
            const isCorrect = JSON.stringify(result) === JSON.stringify(test.expected);
            
            html += `<div class="test" style="border-left: 4px solid ${isCorrect ? '#4CAF50' : '#ff4444'}">`;
            html += `<h3>${test.word} ${isCorrect ? 'âœ? : 'â?}</h3>`;
            html += `<p><strong>åˆ†æå…ƒéŸ³:</strong> ${test.word[test.vowelIdx]} (ç´¢å¼•${test.vowelIdx})</p>`;
            html += `<p><strong>é¢„æœŸéŸ³èŠ‚:</strong> ${test.syllable} = [${test.expected.join(', ')}]</p>`;
            html += `<p><strong>å®é™…ç»“æœ:</strong> ${resultStr} = [${result.join(', ')}]</p>`;
            html += `<div class="word">`;
            for (let i = 0; i < test.word.length; i++) {
                if (result.includes(i)) {
                    html += `<span class="stress">${test.word[i]}</span>`;
                } else {
                    html += `<span class="normal">${test.word[i]}</span>`;
                }
            }
            html += `</div>`;
            html += `</div>`;
        });
        
        document.getElementById('results').innerHTML = html;
    </script>
</body>
</html>

