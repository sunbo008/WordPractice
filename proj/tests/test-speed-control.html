<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€Ÿåº¦æ§åˆ¶æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .speed-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        .button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #2980b9;
        }
        .current-level {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® é€Ÿåº¦æ§åˆ¶æµ‹è¯•å·¥å…·</h1>
        <p>æµ‹è¯•æ¯å‡ä¸€çº§é€Ÿåº¦æ˜¯å¦æ­£ç¡®å¢åŠ 5%</p>
        
        <div class="test-section">
            <h3>å½“å‰æ¸¸æˆçŠ¶æ€</h3>
            <div class="current-level">ç­‰çº§: <span id="current-level">1</span></div>
            <div class="speed-info">
                <div>åŸºç¡€é€Ÿåº¦: <span id="base-speed">0.333</span> åƒç´ /å¸§</div>
                <div>é€Ÿåº¦å€æ•°: <span id="speed-multiplier">1.0</span></div>
                <div>å½“å‰é€Ÿåº¦: <span id="current-speed">0.333</span> åƒç´ /å¸§</div>
                <div>ç†è®ºé€Ÿåº¦: <span id="theoretical-speed">0.333</span> åƒç´ /å¸§</div>
                <div>é€Ÿåº¦å·®å¼‚: <span id="speed-difference">0</span>%</div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>é€Ÿåº¦æµ‹è¯•</h3>
            <button class="button" onclick="simulateLevelUp()">æ¨¡æ‹Ÿå‡çº§</button>
            <button class="button" onclick="resetTest()">é‡ç½®æµ‹è¯•</button>
            <button class="button" onclick="testMultipleLevels()">æµ‹è¯•å¤šçº§å‡çº§</button>
        </div>
        
        <div class="test-section">
            <h3>é€Ÿåº¦è®¡ç®—éªŒè¯</h3>
            <div id="speed-calculations"></div>
        </div>
        
        <div class="test-section">
            <h3>å®é™…æ¸¸æˆé€Ÿåº¦æ£€æŸ¥</h3>
            <button class="button" onclick="checkGameSpeed()">æ£€æŸ¥æ¸¸æˆå®ä¾‹é€Ÿåº¦</button>
            <div id="game-speed-info"></div>
        </div>
    </div>

    <script src="vocabulary.js"></script>
    <script src="game.js"></script>
    <script>
        let testGame = null;
        
        function initTestGame() {
            // åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„æ¸¸æˆå®ä¾‹
            testGame = {
                level: 1,
                baseSpeed: 1 / 3, // åŸºç¡€é€Ÿåº¦ï¼š3å¸§1åƒç´ 
                speedMultiplier: 1.0,
                wordSpeed: 1 / 3,
                
                levelUp: function() {
                    this.level++;
                    this.speedMultiplier += 0.05; // æ¯çº§å¢åŠ 5%
                    this.wordSpeed = this.baseSpeed * this.speedMultiplier;
                }
            };
            updateDisplay();
        }
        
        function updateDisplay() {
            if (!testGame) return;
            
            const theoreticalSpeed = (1 / 3) * (1 + (testGame.level - 1) * 0.05);
            const speedDifference = Math.abs(testGame.wordSpeed - theoreticalSpeed) / theoreticalSpeed * 100;
            
            document.getElementById('current-level').textContent = testGame.level;
            document.getElementById('base-speed').textContent = testGame.baseSpeed.toFixed(6);
            document.getElementById('speed-multiplier').textContent = testGame.speedMultiplier.toFixed(3);
            document.getElementById('current-speed').textContent = testGame.wordSpeed.toFixed(6);
            document.getElementById('theoretical-speed').textContent = theoreticalSpeed.toFixed(6);
            document.getElementById('speed-difference').textContent = speedDifference.toFixed(3);
        }
        
        function simulateLevelUp() {
            if (!testGame) initTestGame();
            
            testGame.levelUp();
            updateDisplay();
            
            console.log(`å‡çº§åˆ° ${testGame.level} çº§:`);
            console.log(`  é€Ÿåº¦å€æ•°: ${testGame.speedMultiplier}`);
            console.log(`  å½“å‰é€Ÿåº¦: ${testGame.wordSpeed} åƒç´ /å¸§`);
        }
        
        function resetTest() {
            initTestGame();
        }
        
        function testMultipleLevels() {
            initTestGame();
            
            let calculations = '<h4>å¤šçº§å‡çº§é€Ÿåº¦è®¡ç®—ï¼š</h4>';
            calculations += '<table border="1" style="border-collapse: collapse; width: 100%;">';
            calculations += '<tr><th>ç­‰çº§</th><th>é€Ÿåº¦å€æ•°</th><th>å®é™…é€Ÿåº¦</th><th>ç†è®ºé€Ÿåº¦</th><th>å¸§æ•°/åƒç´ </th></tr>';
            
            for (let level = 1; level <= 10; level++) {
                testGame.level = level;
                testGame.speedMultiplier = 1.0 + (level - 1) * 0.05;
                testGame.wordSpeed = testGame.baseSpeed * testGame.speedMultiplier;
                
                const theoreticalSpeed = (1 / 3) * (1 + (level - 1) * 0.05);
                const framesPerPixel = 1 / testGame.wordSpeed;
                
                calculations += `<tr>`;
                calculations += `<td>${level}</td>`;
                calculations += `<td>${testGame.speedMultiplier.toFixed(3)}</td>`;
                calculations += `<td>${testGame.wordSpeed.toFixed(6)}</td>`;
                calculations += `<td>${theoreticalSpeed.toFixed(6)}</td>`;
                calculations += `<td>${framesPerPixel.toFixed(2)}</td>`;
                calculations += `</tr>`;
            }
            
            calculations += '</table>';
            calculations += '<p><strong>è¯´æ˜ï¼š</strong></p>';
            calculations += '<ul>';
            calculations += '<li>åŸºç¡€é€Ÿåº¦ï¼š1/3 = 0.333åƒç´ /å¸§ï¼ˆ3å¸§1åƒç´ ï¼‰</li>';
            calculations += '<li>æ¯çº§å¢åŠ 5%ï¼šspeedMultiplier = 1.0 + (level-1) * 0.05</li>';
            calculations += '<li>å½“å‰é€Ÿåº¦ = åŸºç¡€é€Ÿåº¦ Ã— é€Ÿåº¦å€æ•°</li>';
            calculations += '</ul>';
            
            document.getElementById('speed-calculations').innerHTML = calculations;
        }
        
        function checkGameSpeed() {
            // æ£€æŸ¥å®é™…æ¸¸æˆå®ä¾‹çš„é€Ÿåº¦
            let gameInfo = '<h4>å®é™…æ¸¸æˆå®ä¾‹é€Ÿåº¦ä¿¡æ¯ï¼š</h4>';
            
            try {
                // å°è¯•è®¿é—®å…¨å±€æ¸¸æˆå®ä¾‹
                if (typeof window.game !== 'undefined') {
                    const game = window.game;
                    gameInfo += `<div class="speed-info">`;
                    gameInfo += `<div>æ¸¸æˆç­‰çº§: ${game.level}</div>`;
                    gameInfo += `<div>åŸºç¡€é€Ÿåº¦: ${game.baseSpeed}</div>`;
                    gameInfo += `<div>é€Ÿåº¦å€æ•°: ${game.speedMultiplier}</div>`;
                    gameInfo += `<div>å½“å‰é€Ÿåº¦: ${game.wordSpeed}</div>`;
                    gameInfo += `<div>ç†è®ºé€Ÿåº¦: ${(game.baseSpeed * (1 + (game.level - 1) * 0.05)).toFixed(6)}</div>`;
                    gameInfo += `</div>`;
                } else {
                    gameInfo += '<p style="color: orange;">æœªæ‰¾åˆ°æ¸¸æˆå®ä¾‹ã€‚è¯·å…ˆå¯åŠ¨æ¸¸æˆã€‚</p>';
                    gameInfo += '<p>è¯·åœ¨ä¸»æ¸¸æˆé¡µé¢çš„æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥é€Ÿåº¦ï¼š</p>';
                    gameInfo += '<code style="background: #f0f0f0; padding: 5px;">console.log("Level:", game.level, "Speed:", game.wordSpeed, "Multiplier:", game.speedMultiplier);</code>';
                }
            } catch (error) {
                gameInfo += `<p style="color: red;">æ£€æŸ¥æ¸¸æˆé€Ÿåº¦æ—¶å‡ºé”™: ${error.message}</p>`;
            }
            
            document.getElementById('game-speed-info').innerHTML = gameInfo;
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initTestGame();
            testMultipleLevels();
        });
    </script>
</body>
</html>
